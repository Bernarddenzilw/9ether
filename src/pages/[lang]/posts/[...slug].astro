---
import { langs } from "~/i18n/ui"
import MainLayout from "~/layouts/main.astro"
import "~/styles/post.css"
import { getPostsByLocale } from "~/utils"

export async function getStaticPaths() {
  const allPaths = []

  for (const lang of langs) {
    const posts = await getPostsByLocale(lang)
    const paths = posts.map((post: any) => ({
      params: { lang, slug: post.id },
      props: { post },
    }))
    allPaths.push(...paths)
  }

  return allPaths
}

const { post } = Astro.props
---

<MainLayout {...post.data}>
  <article class="prose dark:prose-invert">
    <div set:html={post.rendered.html} />
  </article>
</MainLayout>
